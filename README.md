# interface-FIC-EGS-RAS_region-backend
Frontend и Backend для региона Северная-Осетия

##  Структура проекта

- Frontend (src)
- Backend (backend)

## Структура frontend
- src/components — переиспользуемые атомарные компоненты (кнопки, инпуты, маркеры и т.д.)
- src/modules — крупные модули и контейнеры (карта, карточки станций, доступ к архиву и т.д.)
- src/pages — страницы приложения (авторизация, карта, доступ и т.д.)
- src/services — работа с внешними API и сервисами
- src/constants — константы и справочные данные (актуальные и архивные станции)
- src/styles — SCSS-переменные и миксины
- src/assets — статические ресурсы (иконки, изображения и т.д.)
## Структура backend
- controllers/AdminController.js — контроллеры для административных операций (управление пользователями, ролями, модерация заявок)
- controllers/AuthController.js — контроллеры аутентификации и авторизации (регистрация, вход, восстановление пароля)
- middleware/auth.middleware.js — middleware для проверки аутентификации и прав доступа (верификация JWT, проверка ролей)
- models/database.js — конфигурация базы данных и инициализация схемы (подключение к PostgreSQL, создание таблиц, базовые миграции)
- models/PasswordResetToken.js — модель для работы с токенами восстановления пароля (создание, верификация, очистка просроченных)
- models/User.js — модели пользователей и ролей (UserModel и RoleModel) для работы с профилями, правами доступа и управлением учетными записями
- routes/adminRoutes.js — маршруты для административных функций (управление пользователями, ролями, модерация)
- routes/authRoutes.js — маршруты для аутентификации и авторизации (регистрация, вход, восстановление пароля, профиль)
- routes/download.js — маршруты для работы с архивом данных (поиск, скачивание, экспорт метеоданных)
- routes/view-fullness.js — маршруты для анализа полноты данных (проверка наличия записей в архиве по станциям и датам)
- services/emailService.js — сервис отправки email (сброс пароля, уведомления, конфигурация SMTP/Ethereal)
- services/fileService.js — сервис работы с файлами (SSH подключение к удаленному серверу, поиск и скачивание данных, архивация в ZIP)
- utils/db-viewer.js — утилиты для работы с БД через SSH туннель (подключение к удаленной PostgreSQL, анализ полноты данных, форматирование имен файлов)

server.js — основной файл приложения (инициализация сервера Express, настройка middleware, подключение маршрутов, запуск сервисов)

## Используемые технологии
- React (Vite)
- TypeScript
- SCSS
- PostgreSQL
- JavaScript
  
## Запуск проекта
1. Клонируйте проект с помощью git clone interface-FIC-EGS-RAS_region-backend или скачайте проект
2. В директории interface-FIC-EGS-RAS_region-backend установите зависимости и запустите frontend:
   - npm install
   - npm run dev
3. Запустите backend:
   - перейдите в директорию interface-FIC-EGS-RAS_region-backend/backend
   - установите зависимости npm install
   - запустите backend npm run dev
4. Перед запуском backend необходимо изменить параметры для вашей системы:
   - Зайдите в файл .env
   - Измените необходимые параметры в файле
